var popup=document.querySelector(".js-form"),formTrigger=document.querySelector(".js-form-trigger"),formClose=popup.querySelector(".js-form-close"),form=popup.querySelector("form"),userName=popup.querySelector("[name=name]"),userEmail=popup.querySelector("[name=email]"),userText=popup.querySelector("[name=text]");formTrigger.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("popup-show"),storageName||storageEmail?(userName.value=storageName,userEmail.value=storageEmail,userText.focus()):userName.focus()}),formClose.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("popup-show")}),form.addEventListener("submit",function(e){userName.classList.remove("input-error"),userEmail.classList.remove("input-error"),userName.value&&userEmail.value?(isStorageSupport&&localStorage.setItem("name",userName.value),localStorage.setItem("email",userEmail.value)):(e.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error")),userName.value||userName.classList.add("input-error"),userEmail.value||userEmail.classList.add("input-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("popup-show")&&(popup.classList.remove("popup-show"),popup.classList.remove("popup-error")))});